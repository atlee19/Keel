<!-- 
* Keel 2021 
* 
* Author:    Graham Atlee
* Created:   05.16.2021
* 
* GNU Affero General Public License v3.0
* 
* This is the main render point for the Keel UI. 
 -->
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title></title>
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';" />
    <link rel="stylesheet" href="./css/containerList.css">
    <link rel="stylesheet" href="./css/container.css">
</head>
<body style="background: #40575f">

    <ul class="activeContainerList" id="containerList">
        <!-- docker container list items will be inserted here -->
    </ul>

    <script>
        const {ipcRenderer} = require('electron');

        //update title with latest update-info
        ipcRenderer.on('update-info', function(event, text) {
            console.log(text);
            document.title = `Keel - ${text}` 
        })
    </script>

    <script>
        const hostContainers = require('./js/hostContainers');
        //get list of running containers and display them
        //wrapped in async in order to get the result of promise
        (async () => {
            let containerData = await hostContainers.GetListOfActiveContainers();
            let containerList = document.getElementById('containerList');
            containerData.forEach(container => {
                containerList.innerHTML += `<li 
                id=${container.Id} class="activeContainer">${container.Name}</li>`;
            });

            //once the containers are written to the page we can the enable the swiping UI logic
            const swipeContainers = require('./js/swipeContainer.js');
            swipeContainers.enableSwiping();
        })();

    </script>


</body>
</html>

